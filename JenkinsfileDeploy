pipeline {
    agent any 
    parameters {
    string(name: 'Number', defaultValue: 'Latest', description: 'Number of build')
  }
    stages {
         stage('scm') {
         steps{
         git branch: 'main',
         url: 'https://github.com/demdv/helmk8s.git'
         }
      }
        stage('Build') { 
            steps {
                script{
                    withAWS(credentials:'JenkinsServiceUser',region:'us-west-2') {
                sh '''
                aws eks --region us-west-2 update-kubeconfig --name terraform-eks-demo
                helm upgrade -i demonginx demonginx/ --set biuldNumber=Number
                '''
                }
            }
            }
        }

    }
}